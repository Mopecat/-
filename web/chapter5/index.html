<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>npm | 前端进阶之路</title>
    <meta name="description" content="前端学习记录">
    
    
    <link rel="preload" href="/web/assets/css/0.styles.3c55b503.css" as="style"><link rel="preload" href="/web/assets/js/app.86484ff8.js" as="script"><link rel="preload" href="/web/assets/js/2.977cf486.js" as="script"><link rel="preload" href="/web/assets/js/29.548de805.js" as="script"><link rel="prefetch" href="/web/assets/js/10.62195373.js"><link rel="prefetch" href="/web/assets/js/11.f469e459.js"><link rel="prefetch" href="/web/assets/js/12.13ee9d46.js"><link rel="prefetch" href="/web/assets/js/13.360e90e0.js"><link rel="prefetch" href="/web/assets/js/14.8a8cfe81.js"><link rel="prefetch" href="/web/assets/js/15.611f3a7e.js"><link rel="prefetch" href="/web/assets/js/16.d3aa98b2.js"><link rel="prefetch" href="/web/assets/js/17.5068ae28.js"><link rel="prefetch" href="/web/assets/js/18.b2b8c636.js"><link rel="prefetch" href="/web/assets/js/19.9b38bcf8.js"><link rel="prefetch" href="/web/assets/js/20.764950cd.js"><link rel="prefetch" href="/web/assets/js/21.7c4986bc.js"><link rel="prefetch" href="/web/assets/js/22.6a992c02.js"><link rel="prefetch" href="/web/assets/js/23.99456b43.js"><link rel="prefetch" href="/web/assets/js/24.1a24e035.js"><link rel="prefetch" href="/web/assets/js/25.828281dd.js"><link rel="prefetch" href="/web/assets/js/26.ddd4c3ac.js"><link rel="prefetch" href="/web/assets/js/27.161a4fb8.js"><link rel="prefetch" href="/web/assets/js/28.50aa7468.js"><link rel="prefetch" href="/web/assets/js/3.42674c08.js"><link rel="prefetch" href="/web/assets/js/30.4494096b.js"><link rel="prefetch" href="/web/assets/js/4.86ae4f4a.js"><link rel="prefetch" href="/web/assets/js/5.7f33e53f.js"><link rel="prefetch" href="/web/assets/js/6.19816c28.js"><link rel="prefetch" href="/web/assets/js/7.2854b8cf.js"><link rel="prefetch" href="/web/assets/js/8.0508d119.js"><link rel="prefetch" href="/web/assets/js/9.43c29797.js">
    <link rel="stylesheet" href="/web/assets/css/0.styles.3c55b503.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web/" class="home-link router-link-active"><!----> <span class="site-name">前端进阶之路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/web/chapter1/" class="sidebar-link">面试题记录</a></li><li><a href="/web/chapter2/" class="sidebar-link">设计模式学习记录</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript 进阶笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node 学习记录</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/web/chapter5/" class="active sidebar-link">npm 学习记录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/chapter5/#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#初始化包" class="sidebar-link">初始化包</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#下载包" class="sidebar-link">下载包</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#写一个全局命令" class="sidebar-link">写一个全局命令</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#依赖项" class="sidebar-link">依赖项</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#清空缓存" class="sidebar-link">清空缓存</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#打包" class="sidebar-link">打包</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#版本问题" class="sidebar-link">版本问题</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#协议问题" class="sidebar-link">协议问题</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#scripts" class="sidebar-link">scripts</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#npx" class="sidebar-link">npx</a></li><li class="sidebar-sub-header"><a href="/web/chapter5/#发布" class="sidebar-link">发布</a></li></ul></li><li><a href="/web/chapter6/" class="sidebar-link">性能优化</a></li><li><a href="/web/chapter7/" class="sidebar-link">数据结构与算法</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="npm"><a href="#npm" class="header-anchor">#</a> npm</h1> <h2 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h2> <ul><li><code>nrm</code> 源管理</li> <li><code>nvm</code> 版本管理</li> <li><code>npm</code> 包管理</li></ul> <h2 id="初始化包"><a href="#初始化包" class="header-anchor">#</a> 初始化包</h2> <p>package.json</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> init
// <span class="token function">npm</span> init -y 直接生成默认的package.json
</code></pre></div><h2 id="下载包"><a href="#下载包" class="header-anchor">#</a> 下载包</h2> <ul><li>全局安装 =&gt; 任意目录下的命令行中使用</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i http-server -g
</code></pre></div><h2 id="写一个全局命令"><a href="#写一个全局命令" class="header-anchor">#</a> 写一个全局命令</h2> <p>在<code>package.json</code>里面，添加<code>bin</code>字段</p> <p>本地调试命令，在对应目录下执行 <code>npm link</code> 创建快捷方式指向文件 如目录下的<code>package.json</code> 会形成下面的映射路径</p> <div class="language-sh extra-class"><pre class="language-sh"><code>/usr/local/bin/feely -<span class="token operator">&gt;</span> /usr/local/lib/node_modules/feely-test/bin/www
/usr/local/lib/node_modules/feely-test -<span class="token operator">&gt;</span> /Users/liuyang/Documents/github/FEE-Advance-Summary/npm
</code></pre></div><ul><li>本地安装</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> jquery --save / -S
<span class="token function">npm</span> <span class="token function">install</span> webpack --save-dev / -D
</code></pre></div><p><code>--save</code> 会安装到 <code>dependencies</code> =&gt; 表示上线和开发的时候都需要</p> <p><code>--save-dev / -D</code> 会安装到 <code>devDependencies</code> =&gt; 开发依赖， 上线的时候不需要</p> <blockquote><p>区别就是 有一天模块发布了 ，别人安装我发布的模块时 <code>devDependencies</code> 中的模块是不会被下载的
<code>npm install --production</code> 可以只安装 dependencies</p></blockquote> <h2 id="依赖项"><a href="#依赖项" class="header-anchor">#</a> 依赖项</h2> <ul><li><code>dependencies</code>: 表示上线和开发的时候都需要</li> <li><code>devDependencies</code>: 开发依赖， 上线的时候不需要</li> <li><code>peerDependencies</code>: 会提示你安装缺少的模块，默认要求带版本，如果版本不一致就会提示 <code>warn</code></li> <li><code>bundledDependencies</code>: 打包的依赖项，执行<code>npm pack</code>时，会将<code>bundledDependencies</code>所写的依赖打包到<code>tgz</code>压缩包中，不写则不打包（不常用）</li> <li><code>optionalDependencies</code>: 可选依赖，即当前引用依赖下载时如果没有下载到这个包也会继续下载其他不会中断，也就是这个包可有可无，也就是说我们可能在代码里面兼容处理了这个包，比如如果有这个包就用这个，没有就用其他的</li></ul> <h2 id="清空缓存"><a href="#清空缓存" class="header-anchor">#</a> 清空缓存</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> cache clean --force
</code></pre></div><h2 id="打包"><a href="#打包" class="header-anchor">#</a> 打包</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> pack
</code></pre></div><h2 id="版本问题"><a href="#版本问题" class="header-anchor">#</a> 版本问题</h2> <p>1.0.0</p> <ul><li>第一位 表示不兼容老代码，大规模的更新</li> <li>第二位 表示增加了一些功能</li> <li>第三位 表示小的补丁（改了一些 bug）</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> version patch // 第三位+1
<span class="token function">npm</span> version minor // 第二位+1
<span class="token function">npm</span> version major // 第一位+1
</code></pre></div><p>执行上述代码可以同步<code>git tag</code></p> <p>^2.0.0 <code>^</code>控制第一位版本 本例是不到 3，不能小于 2 =&gt; 2.0.1 / 2.2.2 这样的都可以
~2.1.0 <code>~</code>控制的是第二位版本 本例是 不超过 1 =&gt; 2.1.2 ok</p> <ul><li><code>alpha</code> =&gt; 内部测试版本</li> <li><code>beta</code> =&gt; 公开测试版本</li> <li><code>rc</code> =&gt; 基本 ok 了</li></ul> <h2 id="协议问题"><a href="#协议问题" class="header-anchor">#</a> 协议问题</h2> <p>开源软件一般就选择 <code>MIT</code> 协议</p> <p><img src="licenses.png" alt="开源协议选择"></p> <h2 id="scripts"><a href="#scripts" class="header-anchor">#</a> scripts</h2> <p>可以用<code>scripts</code> 配置执行的脚本</p> <p>1） 执行命令 <code>echo XXXX</code> 输出这一类的</p> <p>2） 执行 <code>node_modules/.bin</code>目录下的文件</p> <p>当执行 <code>npm run</code>的时候 会把当前目录<code>node_modules/.bin</code>也拷贝到当前系统的 <code>path</code> 中(用完就删掉)，所以 <code>npm run</code> 可以执行<code>.bin</code>下的文件</p> <h2 id="npx"><a href="#npx" class="header-anchor">#</a> npx</h2> <p>可以直接执行 <code>node_modules/.bin</code> 目录下的文件，不需要去配 <code>scripts</code></p> <blockquote><p>优点：如果执行的模块不存在，会自动安装，安装完执行完毕后自动销毁，避免安装全局模块。比如：<code>npx create-react-app project-name</code></p></blockquote> <h2 id="发布"><a href="#发布" class="header-anchor">#</a> 发布</h2> <ol><li>登录 <code>npm login</code></li> <li>发布 <code>npm publish</code></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web/chapter4/koa/" class="prev">koa 原理</a></span> <span class="next"><a href="/web/chapter6/">性能优化</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/web/assets/js/app.86484ff8.js" defer></script><script src="/web/assets/js/2.977cf486.js" defer></script><script src="/web/assets/js/29.548de805.js" defer></script>
  </body>
</html>
